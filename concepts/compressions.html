

<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Compressions &mdash; pgpointcloud</title>
  

  
  <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />

  
  
    <link rel="shortcut icon" href="../_static/favicon.ico"/>
  
  
  

  
  <!--[if lt IE 9]>
    <script src="../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
        <script src="../_static/jquery.js"></script>
        <script src="../_static/underscore.js"></script>
        <script src="../_static/doctools.js"></script>
        <script src="../_static/language_data.js"></script>
    
    <script type="text/javascript" src="../_static/js/theme.js"></script>

    
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="copyright" title="Copyright" href="../copyright.html" />
    <link rel="next" title="Binary Formats" href="binary.html" />
    <link rel="prev" title="Tables" href="tables.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../index.html" class="icon icon-home" alt="Documentation Home"> pgPointcloud
          

          
          </a>

          
            
            
              <div class="version">
                1.2.1
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul class="current">
<li class="toctree-l1 current"><a class="reference internal" href="index.html">Concepts</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="schemas.html">Schemas</a></li>
<li class="toctree-l2"><a class="reference internal" href="objects.html">Point Cloud Objects</a></li>
<li class="toctree-l2"><a class="reference internal" href="tables.html">Tables</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">Compressions</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#dimensional-compression">Dimensional Compression</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="binary.html">Binary Formats</a></li>
</ul>
</li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../download.html">Download</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../quickstart.html">Getting Started</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../functions/index.html">Functions</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../tutorials/index.html">Tutorials</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../development.html">Development</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../community.html">Community</a></li>
<li class="toctree-l1"><a class="reference internal" href="../faq.html">FAQ</a></li>
<li class="toctree-l1"><a class="reference internal" href="../copyright.html">License</a></li>
</ul>

            
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">pgPointcloud</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../index.html" class="icon icon-home"></a> &raquo;</li>
        
          <li><a href="index.html">Concepts</a> &raquo;</li>
        
      <li>Compressions</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="compressions">
<span id="id1"></span><h1>Compressions<a class="headerlink" href="#compressions" title="Permalink to this headline">¶</a></h1>
<p>One of the issues with LIDAR data is that there is a lot of it. To deal with
data volumes, PostgreSQL Pointcloud allows schemas to declare their preferred
compression method in the <code class="docutils literal notranslate"><span class="pre">&lt;pc:metadata&gt;</span></code> block of the schema document. In
the example schema, we declared our compression as follows:</p>
<div class="highlight-sql notranslate"><div class="highlight"><pre><span></span><span class="o">&lt;</span><span class="n">pc</span><span class="p">:</span><span class="n">metadata</span><span class="o">&gt;</span>
  <span class="o">&lt;</span><span class="n">Metadata</span> <span class="n">name</span><span class="o">=</span><span class="ss">&quot;compression&quot;</span><span class="o">&gt;</span><span class="n">dimensional</span><span class="o">&lt;/</span><span class="n">Metadata</span><span class="o">&gt;</span>
<span class="o">&lt;/</span><span class="n">pc</span><span class="p">:</span><span class="n">metadata</span><span class="o">&gt;</span>
</pre></div>
</div>
<p>There are currently three supported compressions:</p>
<ul class="simple">
<li><p><strong>None</strong>, which stores points and patches as byte arrays using the type and
formats described in the schema document.</p></li>
<li><p><strong>Dimensional</strong>, which stores points the same as ‘none’ but stores patches as
collections of dimensional data arrays, with an “appropriate” compression
applied. Dimensional compression makes the most sense for smaller patch
sizes, since small patches will tend to have more homogeneous dimensions.</p></li>
<li><p><strong>LAZ</strong> or “LASZip”. You must build Pointcloud with laz-perf support to make
use of the LAZ compression.  If no compression is declared in
<code class="docutils literal notranslate"><span class="pre">&lt;pc:metadata&gt;</span></code>, then a compression of “none” is assumed.</p></li>
</ul>
<div class="section" id="dimensional-compression">
<h2>Dimensional Compression<a class="headerlink" href="#dimensional-compression" title="Permalink to this headline">¶</a></h2>
<p>Dimensional compression first flips the patch representation from a list of N
points containing M dimension values to a list of M dimensions each containing
N values.</p>
<div class="highlight-sql notranslate"><div class="highlight"><pre><span></span>{&quot;pcid&quot;:1,&quot;pts&quot;:[
      [-126.99,45.01,1,0],[-126.98,45.02,2,0],[-126.97,45.03,3,0],
      [-126.96,45.04,4,0],[-126.95,45.05,5,0],[-126.94,45.06,6,0]
     ]}
</pre></div>
</div>
<p>Becomes, notionally:</p>
<div class="highlight-sql notranslate"><div class="highlight"><pre><span></span>{&quot;pcid&quot;:1,&quot;dims&quot;:[
      [-126.99,-126.98,-126.97,-126.96,-126.95,-126.94],
      [45.01,45.02,45.03,45.04,45.05,45.06],
      [1,2,3,4,5,6],
      [0,0,0,0,0,0]
     ]}
</pre></div>
</div>
<p>The potential benefit for compression is that each dimension has quite
different distribution characteristics, and is amenable to different
approaches. In this example, the fourth dimension (intensity) can be very
highly compressed with run-length encoding (one run of six zeros). The first
and second dimensions have relatively low variability relative to their
magnitude and can be compressed by removing the repeated bits.</p>
<p>Dimensional compression currently uses only three compression schemes:</p>
<ul class="simple">
<li><p>run-length encoding, for dimensions with low variability</p></li>
<li><p>common bits removal, for dimensions with variability in a narrow bit range</p></li>
<li><p>raw deflate compression using zlib, for dimensions that aren’t amenable to
the other schemes</p></li>
</ul>
<p>For LIDAR data organized into patches of points that sample similar areas, the
dimensional scheme compresses at between 3:1 and 5:1 efficiency.</p>
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="binary.html" class="btn btn-neutral float-right" title="Binary Formats" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="tables.html" class="btn btn-neutral float-left" title="Tables" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>

    </p>
  </div>
    <div class="footer">
        <div class="container">
            &copy;  2020
            <a href="https://github.com/pramsey">Paul Ramsey</a>,
            <a href="http://github.com/pblottiere">Paul Blottiere</a>,
            <a href="http://github.com/mbredif">Mathieu Brédif</a>,
            <a href="http://github.com/elemoine">Eric Lemoine</a>,
            and
            <a href="https://github.com/pgpointcloud/pointcloud/graphs/contributors">others</a>,
        </div>
    </div>
     


</footer>

        </div>
      </div>

    </section>

  </div>
  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>