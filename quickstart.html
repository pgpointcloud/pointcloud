<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.19: https://docutils.sourceforge.io/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Getting Started &mdash; pgpointcloud</title>
      <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
    <link rel="shortcut icon" href="_static/favicon.ico"/>
  <!--[if lt IE 9]>
    <script src="_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="./" id="documentation_options" src="_static/documentation_options.js"></script>
        <script src="_static/jquery.js"></script>
        <script src="_static/underscore.js"></script>
        <script src="_static/_sphinx_javascript_frameworks_compat.js"></script>
        <script src="_static/doctools.js"></script>
    <script src="_static/js/theme.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="copyright" title="Copyright" href="copyright.html" />
    <link rel="next" title="Functions" href="functions/index.html" />
    <link rel="prev" title="Download" href="download.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
            <a href="index.html" class="icon icon-home"> pgPointcloud
          </a>
              <div class="version">
                1.2.3
              </div>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul>
<li class="toctree-l1"><a class="reference internal" href="concepts/index.html">Concepts</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="download.html">Download</a></li>
</ul>
<ul class="current">
<li class="toctree-l1 current"><a class="current reference internal" href="#">Getting Started</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#introduction">Introduction</a></li>
<li class="toctree-l2"><a class="reference internal" href="#install-pdal">Install PDAL</a></li>
<li class="toctree-l2"><a class="reference internal" href="#running-a-pipeline">Running a pipeline</a></li>
<li class="toctree-l2"><a class="reference internal" href="#pgpointcloud-reader-writer">pgpointcloud reader/writer</a></li>
</ul>
</li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="functions/index.html">Functions</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="update.html">Update</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="tutorials/index.html">Tutorials</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="development.html">Development</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="community.html">Community</a></li>
<li class="toctree-l1"><a class="reference internal" href="faq.html">FAQ</a></li>
<li class="toctree-l1"><a class="reference internal" href="copyright.html">License</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">pgPointcloud</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="index.html" class="icon icon-home"></a> &raquo;</li>
      <li>Getting Started</li>
      <li class="wy-breadcrumbs-aside">
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="getting-started">
<span id="quickstart"></span><h1>Getting Started<a class="headerlink" href="#getting-started" title="Permalink to this heading"></a></h1>
<section id="introduction">
<h2>Introduction<a class="headerlink" href="#introduction" title="Permalink to this heading"></a></h2>
<p>Once pgPointcloud installed, the first step is to load a point cloud in
PostgreSQL to start playing with <code class="docutils literal notranslate"><span class="pre">PcPatch</span></code> and <code class="docutils literal notranslate"><span class="pre">PcPoint</span></code>.</p>
<p>To do that you can write your own loader, using the uncompressed WKB format, or
more simply you can load existing LIDAR files using the <a class="reference external" href="https://pdal.io/">PDAL</a> processing and
format conversion library.</p>
</section>
<section id="install-pdal">
<h2>Install PDAL<a class="headerlink" href="#install-pdal" title="Permalink to this heading"></a></h2>
<p>To install PDAL check out the PDAL <a class="reference external" href="https://pdal.io/development/">development documentation</a>.</p>
<p>With PDAL installed you’re ready to run a PDAL import into PostgreSQL
PointCloud thanks to the dedicated <a class="reference external" href="https://pdal.io/stages/writers.pgpointcloud.html#writers-pgpointcloud">pgPointcloud writer</a>.</p>
</section>
<section id="running-a-pipeline">
<h2>Running a pipeline<a class="headerlink" href="#running-a-pipeline" title="Permalink to this heading"></a></h2>
<p>PDAL includes a <a class="reference external" href="https://pdal.io/apps/index.html">command line program</a> that allows both simple format
translations and more complex “pipelines” of transformation. The pdal translate
does simple format transformations. In order to load data into Pointcloud we
use a “PDAL pipeline”, by calling pdal pipeline. A pipeline combines a format
reader, and format writer, with filters that can alter or group the points
together.</p>
<p>PDAL pipelines are JSON files, which declare readers, filters, and writers
forming a processing chain that will be applied to the LIDAR data.</p>
<p>To execute a pipeline file, run it through the pdal pipeline command:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$ pdal pipeline --input pipelinefile.json
</pre></div>
</div>
<p>Here is a simple example pipeline that reads a LAS file and writes into a
PostgreSQL Pointcloud database.</p>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span><span class="w"></span>
<span class="w">  </span><span class="nt">&quot;pipeline&quot;</span><span class="p">:[</span><span class="w"></span>
<span class="w">    </span><span class="p">{</span><span class="w"></span>
<span class="w">      </span><span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="s2">&quot;readers.las&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">      </span><span class="nt">&quot;filename&quot;</span><span class="p">:</span><span class="s2">&quot;/home/lidar/st-helens-small.las&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">      </span><span class="nt">&quot;spatialreference&quot;</span><span class="p">:</span><span class="s2">&quot;EPSG:26910&quot;</span><span class="w"></span>
<span class="w">    </span><span class="p">},</span><span class="w"></span>
<span class="w">    </span><span class="p">{</span><span class="w"></span>
<span class="w">      </span><span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="s2">&quot;filters.chipper&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">      </span><span class="nt">&quot;capacity&quot;</span><span class="p">:</span><span class="mi">400</span><span class="w"></span>
<span class="w">    </span><span class="p">},</span><span class="w"></span>
<span class="w">    </span><span class="p">{</span><span class="w"></span>
<span class="w">      </span><span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="s2">&quot;writers.pgpointcloud&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">      </span><span class="nt">&quot;connection&quot;</span><span class="p">:</span><span class="s2">&quot;host=&#39;localhost&#39; dbname=&#39;pc&#39; user=&#39;lidar&#39; password=&#39;lidar&#39; port=&#39;5432&#39;&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">      </span><span class="nt">&quot;table&quot;</span><span class="p">:</span><span class="s2">&quot;sthsm&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">      </span><span class="nt">&quot;compression&quot;</span><span class="p">:</span><span class="s2">&quot;dimensional&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">      </span><span class="nt">&quot;srid&quot;</span><span class="p">:</span><span class="s2">&quot;26910&quot;</span><span class="w"></span>
<span class="w">    </span><span class="p">}</span><span class="w"></span>
<span class="w">  </span><span class="p">]</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
</pre></div>
</div>
<p>PostgreSQL Pointcloud storage of LIDAR works best when each “patch” of points
consists of points that are close together, and when most patches do not
overlap. In order to convert unordered data from a LIDAR file into
patch-organized data in the database, we need to pass it through a filter to
“chip” the data into compact patches. The “chipper” is one of the filters we
need to apply to the data while loading.</p>
<p>Similarly, reading data from a PostgreSQL Pointcloud uses a Pointcloud reader
and a file writer of some sort. This example reads from the database and writes
to a CSV text file:</p>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span><span class="w"></span>
<span class="w">  </span><span class="nt">&quot;pipeline&quot;</span><span class="p">:[</span><span class="w"></span>
<span class="w">    </span><span class="p">{</span><span class="w"></span>
<span class="w">      </span><span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="s2">&quot;readers.pgpointcloud&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">      </span><span class="nt">&quot;connection&quot;</span><span class="p">:</span><span class="s2">&quot;host=&#39;localhost&#39; dbname=&#39;pc&#39; user=&#39;lidar&#39; password=&#39;lidar&#39; port=&#39;5432&#39;&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">      </span><span class="nt">&quot;table&quot;</span><span class="p">:</span><span class="s2">&quot;sthsm&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">      </span><span class="nt">&quot;column&quot;</span><span class="p">:</span><span class="s2">&quot;pa&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">      </span><span class="nt">&quot;spatialreference&quot;</span><span class="p">:</span><span class="s2">&quot;EPSG:26910&quot;</span><span class="w"></span>
<span class="w">    </span><span class="p">},</span><span class="w"></span>
<span class="w">    </span><span class="p">{</span><span class="w"></span>
<span class="w">      </span><span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="s2">&quot;writers.text&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">      </span><span class="nt">&quot;filename&quot;</span><span class="p">:</span><span class="s2">&quot;/home/lidar/st-helens-small-out.txt&quot;</span><span class="w"></span>
<span class="w">    </span><span class="p">}</span><span class="w"></span>
<span class="w">  </span><span class="p">]</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
</pre></div>
</div>
<p>Note that we do not need to chip the data stream when reading from the
database, as the writer does not care if the points are blocked into patches or
not.</p>
<p>You can use the “where” option to restrict a read to just an envelope, allowing
partial extracts from a table:</p>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span><span class="w"></span>
<span class="w">  </span><span class="nt">&quot;pipeline&quot;</span><span class="p">:[</span><span class="w"></span>
<span class="w">    </span><span class="p">{</span><span class="w"></span>
<span class="w">      </span><span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="s2">&quot;readers.pgpointcloud&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">      </span><span class="nt">&quot;connection&quot;</span><span class="p">:</span><span class="s2">&quot;host=&#39;localhost&#39; dbname=&#39;pc&#39; user=&#39;lidar&#39; password=&#39;lidar&#39; port=&#39;5432&#39;&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">      </span><span class="nt">&quot;table&quot;</span><span class="p">:</span><span class="s2">&quot;sthsm&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">      </span><span class="nt">&quot;column&quot;</span><span class="p">:</span><span class="s2">&quot;pa&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">      </span><span class="nt">&quot;spatialreference&quot;</span><span class="p">:</span><span class="s2">&quot;EPSG:26910&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">      </span><span class="nt">&quot;where&quot;</span><span class="p">:</span><span class="s2">&quot;PC_Intersects(pa, ST_MakeEnvelope(560037.36, 5114846.45, 562667.31, 5118943.24, 26910))&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">    </span><span class="p">},</span><span class="w"></span>
<span class="w">    </span><span class="p">{</span><span class="w"></span>
<span class="w">      </span><span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="s2">&quot;writers.text&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">      </span><span class="nt">&quot;filename&quot;</span><span class="p">:</span><span class="s2">&quot;/home/lidar/st-helens-small-out.txt&quot;</span><span class="w"></span>
<span class="w">    </span><span class="p">}</span><span class="w"></span>
<span class="w">  </span><span class="p">]</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
</pre></div>
</div>
</section>
<section id="pgpointcloud-reader-writer">
<h2>pgpointcloud reader/writer<a class="headerlink" href="#pgpointcloud-reader-writer" title="Permalink to this heading"></a></h2>
<p>The PDAL <a class="reference external" href="https://pdal.io/stages/writers.pgpointcloud.html">writers.pgpointcloud</a> for PostgreSQL Pointcloud takes the following
options:</p>
<ul class="simple">
<li><p><strong>connection</strong>: The PostgreSQL database connection string. E.g. <code class="docutils literal notranslate"><span class="pre">host=localhost</span> <span class="pre">user=username</span> <span class="pre">password=pw</span> <span class="pre">db=dbname</span> <span class="pre">port=5432</span></code></p></li>
<li><p><strong>table</strong>: The database table create to write the patches to.</p></li>
<li><p><strong>schema</strong>: The schema to create the table in. [Optional]</p></li>
<li><p><strong>column</strong>: The column name to use in the patch table. [Optional: “pa”]</p></li>
<li><p><strong>compression</strong>: The patch compression format to use [Optional: “dimensional”]</p></li>
<li><p><strong>overwrite</strong>: Replace any existing table [Optional: true]</p></li>
<li><p><strong>srid</strong>: The spatial reference id to store data in [Optional: 4326]</p></li>
<li><p><strong>pcid</strong>: An existing PCID to use for the point cloud schema [Optional]</p></li>
<li><p><strong>pre_sql</strong>: Before the pipeline runs, read and execute this SQL file or command [Optional]</p></li>
<li><p><strong>post_sql</strong>: After the pipeline runs, read and execute this SQL file or command [Optional]</p></li>
</ul>
<p>The PDAL <a class="reference external" href="https://pdal.io/stages/readers.pgpointcloud.html">readers.pgpointcloud</a> for PostgreSQL Pointcloud takes the following
options:</p>
<ul class="simple">
<li><p><strong>connection</strong>: The PostgreSQL database connection string. E.g. <code class="docutils literal notranslate"><span class="pre">host=localhost</span> <span class="pre">user=username</span> <span class="pre">password=pw</span> <span class="pre">db=dbname</span> <span class="pre">port=5432</span></code></p></li>
<li><p><strong>table</strong>: The database table to read the patches from.</p></li>
<li><p><strong>schema</strong>: The schema to read the table from. [Optional]</p></li>
<li><p><strong>column</strong>: The column name in the patch table to read from. [Optional: “pa”]</p></li>
<li><p><strong>where</strong>: SQL where clause to constrain the query [Optional]</p></li>
<li><p><strong>spatialreference</strong>: Overrides the database declared SRID [Optional]</p></li>
</ul>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="download.html" class="btn btn-neutral float-left" title="Download" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="functions/index.html" class="btn btn-neutral float-right" title="Functions" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p></p>
  </div>

  
    <div class="footer">
        <div class="container">
            &copy;  2022
            <a href="https://github.com/pramsey">Paul Ramsey</a>,
            <a href="http://github.com/pblottiere">Paul Blottiere</a>,
            <a href="http://github.com/mbredif">Mathieu Brédif</a>,
            <a href="http://github.com/elemoine">Eric Lemoine</a>,
            and
            <a href="https://github.com/pgpointcloud/pointcloud/graphs/contributors">others</a>,
        </div>
    </div>
     


</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>